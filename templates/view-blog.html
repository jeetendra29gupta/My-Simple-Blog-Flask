{% extends "layout.html" %}

{% block title %} My Simple Blog | View Blog Page || {{ post.title }} {% endblock %}

{% block body %}

{% include "navigation.html"%}
{% include "message.html" %}

<!-- Post View SECTION -->
<div class="w3-container">
    <h2 class="w3-center w3-bold">{{ post.title }}</h2>

    <p class="w3-display-container">
         <span  style="padding:3px" class="w3-display-right w3-tag w3-round
            {% if post.status.value in ['draft', 'unpublished'] %} w3-orange {% else %} w3-green {% endif %}">
            <span class="w3-tag w3-round w3-padding w3-large w3-border w3-border-white w3-bold
                {% if post.status.value in ['draft', 'unpublished'] %} w3-orange {% else %} w3-green {% endif %}">
                    {{ post.status.value.upper() }}
            </span>
        </span><br>
        <span class="w3-large w3-serif w3-italic">
            Created on: {{ post.created_at.strftime('%Y-%m-%d %H:%M') }} <br>
            Last updated: {{ post.updated_at.strftime('%Y-%m-%d %H:%M') }}
        </span>
    </p>

    <hr>

    {{ post.body | safe }}

</div>
<!-- Navigation SECTION  -->
<div class="w3-center">
    <div class="w3-bar">
        <a href="{{ url_for('main.blog') }}"
           class="w3-button w3-ripple w3-black w3-round w3-bold">Back</a>
        <a href="{{ url_for('main.edit_blog', bid=post.id) }}"
           class="w3-button w3-ripple w3-teal w3-round w3-bold">Edit</a>
        <a href="{{ url_for('main.delete_blog', bid=post.id) }}"
           class="w3-button w3-ripple w3-red w3-round w3-bold"
           onclick="return confirm('Are you sure you want to delete this post?');">
            Delete
        </a>
        {% if post.status.value in ["draft", "unpublished"] %}
        <a href="{{ url_for('main.toggle_status', bid=post.id) }}"
           class="w3-button w3-ripple w3-green w3-round w3-bold">
            Published
        </a>
        {% else %}
        <a href="{{ url_for('main.toggle_status', bid=post.id) }}"
           class="w3-button w3-ripple w3-orange w3-round w3-bold">
            Unpublished
        </a>
        {% endif %}

    </div>
</div>

{% endblock %}